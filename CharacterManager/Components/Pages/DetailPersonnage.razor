@page "/detail-personnage/{id:int}"
@attribute [Microsoft.AspNetCore.Authorization.Authorize]
@inject PersonnageService PersonnageService
@inject NavigationManager Navigation
@using CharacterManager.Server.Models
@using CharacterManager.Server.Services
@using System
@using System.Linq
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@rendermode InteractiveServer

<link rel="stylesheet" href="/Styles/DetailPersonnage.css" />

<PageTitle>@(currentPerso?.Nom ?? "Détail Personnage")</PageTitle>

@if (currentPerso != null)
{
    <div class="page-header-banner">
        <a href="/" class="back-button" aria-label="Retour" title="Back to home"></a>
        <h1 class="page-title">@currentPerso.Nom</h1>
    </div>

    <div class="personnage-detail-container">
        <div class="container d-flex justify-content-center align-items-center" style="min-height: 70vh;">
            <div style="text-align: center; max-width: 500px;">
                @if (!string.IsNullOrEmpty(currentPerso.ImageUrlDetail))
                {
                    <img src="@currentPerso.ImageUrlDetail" alt="@currentPerso.Nom" class="img-fluid" style="max-width: 100%; height: auto; border-radius: 8px;" onerror="this.onerror=null; this.src='/images/interface/default_portrait.png';" />
                }
                else
                {
                    <img src="/images/interface/default_portrait.png" alt="@currentPerso.Nom" class="img-fluid" style="max-width: 100%; height: auto; border-radius: 8px;" />
                }
            </div>
        </div>
    </div>
}
else
{
    <div class="alert alert-danger">Personnage non trouvé</div>
}


